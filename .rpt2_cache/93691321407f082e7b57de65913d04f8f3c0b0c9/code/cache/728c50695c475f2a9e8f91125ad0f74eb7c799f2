{"code":"import * as React from 'react';\r\nimport Trigger from 'rc-trigger';\r\nimport styled from 'styled-components';\r\nimport ResizeObserver from 'resize-observer-polyfill';\r\nimport 'rc-trigger/assets/index.css';\r\nimport { time } from 'uniqid';\r\nimport ToggleButton from './ToggleButton';\r\nimport DropdownList from './DropdownList';\r\nconst Root = styled.div `\n  min-width: ${(props) => props.minWidth ? props.minWidth : '250px'};\n  position: relative;\n  white-space: nowrap;\n`;\r\nconst Wrapper = styled.div `\n  display: inline-block;\n  background: ${(props) => props.background ? props.background : 'unset'};\n`;\r\nconst Item = styled.div `\n  display: inline-block;\n  padding: ${(props) => props.itemPadding ? props.itemPadding : 'unset'};\n\n  &:first-child {\n    padding-left: 0;\n  }\n`;\r\nconst PLACEMENT = {\r\n    left: {\r\n        points: ['cr', 'cl'],\r\n    },\r\n    right: {\r\n        points: ['cl', 'cr'],\r\n    },\r\n    top: {\r\n        points: ['bc', 'tc'],\r\n    },\r\n    bottom: {\r\n        points: ['tc', 'bc'],\r\n    },\r\n    topLeft: {\r\n        points: ['bl', 'tl'],\r\n    },\r\n    topRight: {\r\n        points: ['br', 'tr'],\r\n    },\r\n    bottomRight: {\r\n        points: ['tr', 'br'],\r\n    },\r\n    bottomLeft: {\r\n        points: ['tl', 'bl'],\r\n    },\r\n};\r\nexport default class PriorityNav extends React.Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = {\r\n            resizeId: null,\r\n            children: this.props.children,\r\n            dropdownItems: [],\r\n            lastItemWidth: [],\r\n            show: false,\r\n        };\r\n        this.items = new Map();\r\n        this.onResize = () => {\r\n            window.clearTimeout(this.state.resizeId);\r\n            this.setState({\r\n                resizeId: window.setTimeout(this.doesItFit, this.props.delay),\r\n            });\r\n        };\r\n        this.doesItFit = () => {\r\n            if (this.nav) {\r\n                const outerWidth = this.outerNav.offsetWidth;\r\n                const totalWidth = this.nav.offsetWidth;\r\n                if (this.items.size > 0 && totalWidth > outerWidth) {\r\n                    this.moveItemToList();\r\n                }\r\n                else if (this.state.dropdownItems.length > 0 &&\r\n                    outerWidth >\r\n                        totalWidth +\r\n                            this.state.lastItemWidth[this.state.lastItemWidth.length - 1] +\r\n                            this.props.offset) {\r\n                    this.moveItemToNav();\r\n                }\r\n            }\r\n        };\r\n        this.moveItemToList = () => {\r\n            this.setState((prevState, props) => {\r\n                const children = [...prevState.children];\r\n                const lastItem = children.splice(-1, 1);\r\n                return {\r\n                    children,\r\n                    dropdownItems: lastItem.concat(prevState.dropdownItems),\r\n                    lastItemWidth: [\r\n                        ...prevState.lastItemWidth,\r\n                        this.items.get(prevState.children.length - 1).clientWidth,\r\n                    ],\r\n                };\r\n            });\r\n        };\r\n        this.moveItemToNav = () => {\r\n            this.setState((prevState, props) => {\r\n                const dropdownItems = [...prevState.dropdownItems];\r\n                const firstItemFromList = dropdownItems.splice(0, 1);\r\n                return {\r\n                    children: [...prevState.children].concat(firstItemFromList),\r\n                    dropdownItems,\r\n                    lastItemWidth: prevState.lastItemWidth.splice(0, 1),\r\n                };\r\n            });\r\n        };\r\n        this.toggleShow = () => {\r\n            this.setState((prevState, props) => ({\r\n                show: !prevState.show,\r\n            }));\r\n        };\r\n        this.renderDropdownList = () => {\r\n            let children = this.state.dropdownItems.map(item => item);\r\n            if (this.props.dropdownList) {\r\n                return this.props.dropdownList(children);\r\n            }\r\n            return (React.createElement(DropdownList, null, children.map(item => React.createElement(\"div\", { key: time() }, item))));\r\n        };\r\n        this.renderChildren = (props) => {\r\n            return React.Children.map(this.state.children, (child, i) => {\r\n                return (React.createElement(Item, { innerRef: s => {\r\n                        this.items.set(i, s);\r\n                    }, key: time(), itemPadding: props.itemPadding }, child));\r\n            });\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        this.doesItFit();\r\n        const resizeObserver = new ResizeObserver(this.onResize);\r\n        resizeObserver.observe(this.outerNav);\r\n    }\r\n    componentWillUnmount() {\r\n        window.clearInterval(this.state.resizeId);\r\n    }\r\n    render() {\r\n        return (React.createElement(Root, { minWidth: this.props.minWidth, innerRef: s => {\r\n                this.outerNav = s;\r\n            } },\r\n            React.createElement(Wrapper, Object.assign({}, this.props.navSetting, { innerRef: s => {\r\n                    this.nav = s;\r\n                } }),\r\n                this.renderChildren(this.props),\r\n                this.state.dropdownItems.length > 0 && (React.createElement(Trigger, { action: ['click'], popupAlign: {\r\n                        points: PLACEMENT[this.props.placement].points,\r\n                        offset: [0, 3],\r\n                    }, popup: this.renderDropdownList() }, this.props.icon ? (React.createElement(this.props.icon, Object.assign({}, this.props.iconSetting))) : (React.createElement(ToggleButton, Object.assign({}, this.props.iconSetting))))))));\r\n    }\r\n}\r\nPriorityNav.defaultProps = {\r\n    itemPadding: 0,\r\n    offset: 0,\r\n    delay: 0,\r\n    placement: 'bottomRight',\r\n};\r\n//# sourceMappingURL=Nav.js.map","map":{"version":3,"file":"Nav.js","sourceRoot":"","sources":["src/Nav.tsx"],"names":[],"mappings":"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"}}
